times = 50
))
b <- ab$b
class(b)
source('C:/Users/Owner/Desktop/RcppML/R/nnls.R')
size <- 10
ab <- random_system(size, 123)
x_zero <- rep(0, size)
x_rand <- runif(size) * 0.01
autoplot(microbenchmark(
"zero-init CD" = nnls(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"rand-init CD" = nnls(ab$a, ab$b, x = x_rand, cd_maxit = 1000),
"llt-init CD" = nnls(ab$a, ab$b, fast_maxit = 0, cd_maxit = 1000),
"fast-CD" = nnls(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
"fnnls" = fnnls(ab$a, ab$b),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
"R2" = nnls2(ab$a, ab$b),
times = 50
))
size <- 10
ab <- random_system(size, 123)
x_zero <- rep(0, size)
x_rand <- runif(size) * 0.01
autoplot(microbenchmark(
"zero-init CD" = nnls(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"rand-init CD" = nnls(ab$a, ab$b, x = x_rand, cd_maxit = 1000),
"llt-init CD" = nnls(ab$a, ab$b, fast_maxit = 0, cd_maxit = 1000),
"fast-CD" = nnls(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
"fnnls" = fnnls(ab$a, ab$b),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
"R2" = nnls2(ab$a, ab$b),
times = 50
))
size <- 10
ab <- random_system(size, 123)
x_zero <- as.matrix(rep(0, size))
x_rand <- as.matrix(runif(size) * 0.01)
autoplot(microbenchmark(
"zero-init CD" = nnls2(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"rand-init CD" = nnls2(ab$a, ab$b, x = x_rand, cd_maxit = 1000),
"llt-init CD" = nnls2(ab$a, ab$b, fast_maxit = 0, cd_maxit = 1000),
"fast-CD" = nnls2(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
"fnnls" = fnnls(ab$a, ab$b),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
times = 50
))
size <- 100
ab <- random_system(size, 123)
x_zero <- as.matrix(rep(0, size))
x_rand <- as.matrix(runif(size) * 0.01)
autoplot(microbenchmark(
"zero-init CD" = nnls2(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"rand-init CD" = nnls2(ab$a, ab$b, x = x_rand, cd_maxit = 1000),
"llt-init CD" = nnls2(ab$a, ab$b, fast_maxit = 0, cd_maxit = 1000),
"fast-CD" = nnls2(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
"fnnls" = fnnls(ab$a, ab$b),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
times = 50
))
size <- 50
ab <- random_system(size, 123)
x_zero <- as.matrix(rep(0, size))
autoplot(microbenchmark(
"zero-init CD" = nnls2(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD" = nnls2(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
times = 50
))
crossprod(X)
size <- 25
ab <- random_system(size, 123)
x_zero <- as.matrix(rep(0, size))
autoplot(microbenchmark(
"zero-init CD" = nnls2(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD" = nnls2(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
"crossprod(X)" = crossprod(X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(X), crossprod(X, y)),
times = 50
))
size <- 25
ab <- random_system(size, 123)
x_zero <- as.matrix(rep(0, size))
autoplot(microbenchmark(
"zero-init CD" = nnls2(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD" = nnls2(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
"crossprod(X)" = crossprod(X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(X), crossprod(X, y)),
times = 50
))
rep(0, 25)
ab <- random_system(25, 123)
x_zero <- as.matrix(rep(0, 25))
autoplot(microbenchmark(
"zero-init CD" = nnls2(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD" = nnls2(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
"crossprod(X)" = crossprod(X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(X), crossprod(X, y)),
times = 50
))
x_zero <- as.matrix(rep(0, 25))
x_zero
autoplot(microbenchmark(
"zero-init CD" = nnls2(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD" = nnls2(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
"crossprod(X)" = crossprod(X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(X), crossprod(X, y)),
times = 50
))
ab <- random_system(25, 123)
x_zero <- as.matrix(rep(0, 25))
ab
random_system <- function(m, seed){
set.seed(seed)
X <- abs(matrix(rnorm(100*m),100, m))
btrue <- runif(m)
y <- X %*% btrue + rnorm(100)
return(list("a" = crossprod(X), "b" = crossprod(X, y), "X" = X, "y" = y))
}
ab <- random_system(25, 123)
x_zero <- as.matrix(rep(0, 25))
autoplot(microbenchmark(
"zero-init CD" = nnls2(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD" = nnls2(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
"crossprod(X)" = crossprod(X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(X), crossprod(X, y)),
times = 50
))
ab <- random_system(50, 123)
x_zero <- as.matrix(rep(0, 25))
autoplot(microbenchmark(
"zero-init CD" = nnls2(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD" = nnls2(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
"crossprod(X)" = crossprod(X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(X), crossprod(X, y)),
times = 50
))
ab <- random_system(50, 123)
x_zero <- as.matrix(rep(0, 25))
autoplot(microbenchmark(
"zero-init CD" = nnls2(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD" = nnls2(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
"crossprod(X)" = crossprod(X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(X), crossprod(X, y)),
times = 100
))
ab <- random_system(50, 123)
x_zero <- as.matrix(rep(0, 25))
autoplot(microbenchmark(
"zero-init CD" = nnls2(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD" = nnls2(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b, fast_maxit = 100, cd_maxit = 1000),
"crossprod(X)" = crossprod(X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y)),
times = 100
))
plot(nnls::nnls(ab$X, ab$y), Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$Y)))
plot(coef(nnls::nnls(ab$X, ab$y)), Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$Y)))
coef(nnls::nnls(ab$X, ab$y))
Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$Y))
crossprod(ab$X)
crossprod(ab$X, ab$y)
dim(crossprod(ab$X))
dim(crossprod(ab$X, ab$y))
Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y)
)
Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y))
plot(nnls::nnls(ab$X, ab$y), Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y)))
plot(coef(nnls::nnls(ab$X, ab$y)), Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y)))
ab <- random_system(50, 123)
x_zero <- as.matrix(rep(0, 25))
autoplot(microbenchmark(
"zero-init CD" = nnls2(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD" = nnls2(ab$a, ab$b),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b),
"crossprod(X)" = crossprod(X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y)),
times = 100
))
ab <- random_system(50, 123)
x_zero <- as.matrix(rep(0, 25))
autoplot(microbenchmark(
"zero-init CD" = nnls2(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD" = nnls2(ab$a, ab$b),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b),
"crossprod(X)" = crossprod(X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y)),
times = 100
))
ab <- random_system(50, 123)
x_zero <- as.matrix(rep(0, 25))
autoplot(microbenchmark(
"zero-init CD" = nnls2(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD" = nnls2(ab$a, ab$b),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b),
"crossprod(X)" = crossprod(X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y)),
times = 100
))
plot(base::solve(ab$a, ab$b), Rcpp_nnls_double(ab$a, ab$b))
ab <- random_system(50, 123)
x_zero <- as.matrix(rep(0, 25))
autoplot(microbenchmark(
"zero-init CD" = nnls2(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD" = nnls2(ab$a, ab$b),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b),
"crossprod(X)" = crossprod(X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y)),
times = 100
))
ab <- random_system(50, 123)
x_zero <- as.matrix(rep(0, 25))
autoplot(microbenchmark(
"zero-init CD" = nnls2(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD" = nnls2(ab$a, ab$b),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b),
"crossprod(X)" = crossprod(X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y)),
times = 100
))
ab <- random_system(20, 123)
x_zero <- as.matrix(rep(0, 25))
autoplot(microbenchmark(
"zero-init CD" = nnls2(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD" = nnls2(ab$a, ab$b),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b),
"crossprod(X)" = crossprod(X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y)),
times = 100
))
ab <- random_system(20, 123)
x_zero <- as.matrix(rep(0, 25))
autoplot(microbenchmark(
"zero-init CD" = nnls(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD" = nnls(ab$a, ab$b),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b),
"crossprod(X)" = crossprod(X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y)),
times = 100
))
ab <- random_system(20, 123)
x_zero <- as.matrix(rep(0, 25))
autoplot(microbenchmark(
"zero-init CD" = nnls(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD" = nnls2(ab$a, ab$b),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b),
"crossprod(X)" = crossprod(X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y)),
times = 100
))
ab <- random_system(20, 123)
x_zero <- as.matrix(rep(0, 25))
autoplot(microbenchmark(
"zero-init CD" = nnls(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD" = nnls2(ab$a, ab$b),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b),
"crossprod(X)" = crossprod(X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y)),
times = 100
))
ab <- random_system(20, 123)
x_zero <- as.matrix(rep(0, 25))
autoplot(microbenchmark(
"zero-init CD" = nnls(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD2" = nnls2(ab$a, ab$b),
"fast-CD" = nnls(ab$a, ab$b),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b),
"crossprod(X)" = crossprod(X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y)),
times = 100
))
source('C:/Users/Owner/Desktop/RcppML/R/nnls.R')
document()
rm(list = ls())
document()
ab <- random_system(20, 123)
random_system <- function(m, seed){
set.seed(seed)
X <- abs(matrix(rnorm(100*m),100, m))
btrue <- runif(m)
y <- X %*% btrue + rnorm(100)
return(list("a" = crossprod(X), "b" = crossprod(X, y), "X" = X, "y" = y))
}
ab <- random_system(20, 123)
x_zero <- as.matrix(rep(0, 25))
autoplot(microbenchmark(
"zero-init CD" = nnls(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD2" = nnls2(ab$a, ab$b),
"fast-CD" = nnls(ab$a, ab$b),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b),
"crossprod(X)" = crossprod(X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y)),
times = 100
))
ab <- random_system(20, 123)
x_zero <- as.matrix(rep(0, 25))
autoplot(microbenchmark(
"zero-init CD" = nnls(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD2" = nnls2(ab$a, ab$b),
"fast-CD" = nnls(ab$a, ab$b),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b),
"crossprod(X)" = crossprod(ab$X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y)),
times = 100
))
ab <- random_system(20, 123)
x_zero <- as.matrix(rep(0, 25))
autoplot(microbenchmark(
"zero-init CD" = nnls(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD2" = nnls2(ab$a, ab$b),
"fast-CD" = nnls(ab$a, ab$b),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b),
"crossprod(X)" = crossprod(ab$X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y)),
times = 100
))
Rcpp::sourceCpp('src/RcppML.cpp')
ab <- random_system(20, 123)
x_zero <- as.matrix(rep(0, 20))
autoplot(microbenchmark(
"zero-init CD" = nnls(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD2" = nnls2(ab$a, ab$b),
"fast-CD" = nnls(ab$a, ab$b),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b),
"crossprod(X)" = crossprod(ab$X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y)),
times = 100
))
ab <- random_system(20, 123)
x_zero <- as.matrix(rep(0, 20))
autoplot(microbenchmark(
"zero-init CD" = nnls(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD2" = nnls2(ab$a, ab$b),
"fast-CD" = nnls(ab$a, ab$b),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b),
"crossprod(X)" = crossprod(ab$X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y)),
times = 100
))
document()
rm(list = ls())
document()
ab <- random_system(20, 123)
x_zero <- as.matrix(rep(0, 20))
autoplot(microbenchmark(
"zero-init CD" = nnls(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD2" = nnls2(ab$a, ab$b),
"fast-CD" = nnls(ab$a, ab$b),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b),
"crossprod(X)" = crossprod(ab$X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y)),
times = 100
))
random_system <- function(m, seed){
set.seed(seed)
X <- abs(matrix(rnorm(100*m),100, m))
btrue <- runif(m)
y <- X %*% btrue + rnorm(100)
return(list("a" = crossprod(X), "b" = crossprod(X, y), "X" = X, "y" = y))
}
ab <- random_system(20, 123)
x_zero <- as.matrix(rep(0, 20))
autoplot(microbenchmark(
"zero-init CD" = nnls(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD2" = nnls2(ab$a, ab$b),
"fast-CD" = nnls(ab$a, ab$b),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b),
"crossprod(X)" = crossprod(ab$X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y)),
times = 100
))
ab <- random_system(20, 123)
x_zero <- as.matrix(rep(0, 20))
autoplot(microbenchmark(
"zero-init CD" = nnls(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD2" = nnls2(ab$a, ab$b),
"fast-CD" = nnls(ab$a, ab$b),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b),
"crossprod(X)" = crossprod(ab$X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y)),
times = 100
))
ab <- random_system(50, 123)
x_zero <- as.matrix(rep(0, 50))
autoplot(microbenchmark(
"zero-init CD" = nnls(ab$a, ab$b, x = x_zero, cd_maxit = 1000),
"fast-CD2" = nnls2(ab$a, ab$b),
"fast-CD" = nnls(ab$a, ab$b),
"base-solve" = base::solve(ab$a, ab$b),
"Rcpp" = Rcpp_nnls_double(ab$a, ab$b),
"crossprod(X)" = crossprod(ab$X),
"nnls::nnls" = nnls::nnls(ab$X, ab$y),
"Rcpp w/ crossprod" = Rcpp_nnls_double(crossprod(ab$X), crossprod(ab$X, ab$y)),
times = 100
))
plot(nnls(ab$a, ab$b), nnls2(ab$a, ab$b))
plot(nnls(ab$a, ab$b), Rcpp_nnls_double(ab$a, ab$b))
plot(nnls(ab$a, ab$b), solve(a, b))
plot(nnls(ab$a, ab$b), solve(ab$a, ab$b))
plot(nnls(ab$a, ab$b), fnnls(ab$a, ab$b))
Rcpp::sourceCpp('src/RcppML.cpp')
Rcpp::sourceCpp('src/RcppML.cpp')
Rcpp::sourceCpp('src/RcppML.cpp')
A <- rsparsematrix(1000, 10000, 0.05)
library(Matrix)
A <- rsparsematrix(1000, 10000, 0.05)
model <- Rcpp_nmf_double(A, 5)
model <- Rcpp_nmf2_double(A, 5)
model <- Rcpp_nmf_double(A, 5)
microbenchmark(Rcpp_nmf_double(A, 5, verbose = F), Rcpp_nmf2_double(A, 5, verbose = F), times = 20)
library(microbenchmark)
library(ggplot2)
autoplot(microbenchmark(Rcpp_nmf_double(A, 5, verbose = F), Rcpp_nmf2_double(A, 5, verbose = F), times = 20))
Rcpp::sourceCpp('src/RcppML.cpp')
model <- Rcpp_nmf2_double(A, 5)
autoplot(microbenchmark(Rcpp_nmf_double(A, 5, verbose = F), Rcpp_nmf2_double(A, 5, verbose = F), times = 20))
autoplot(microbenchmark(Rcpp_nmf_double(A, 10, verbose = F), Rcpp_nmf2_double(A, 10, verbose = F), times = 10))
autoplot(microbenchmark(Rcpp_nmf_double(A, 10, verbose = F), Rcpp_nmf2_double(A, 10, verbose = F), times = 100))
autoplot(microbenchmark(Rcpp_nmf_double(A, 10, verbose = F, maxit = 7), Rcpp_nmf2_double(A, 10, verbose = F, maxit = 7), times = 100))
autoplot(microbenchmark(Rcpp_nmf_double(A, 10, verbose = F), irlba(A, 10), Rcpp_nmf2_double(A, 10, verbose = F), times = 10))
library(irlba)
autoplot(microbenchmark(Rcpp_nmf_double(A, 10, verbose = F), irlba(A, 10), Rcpp_nmf2_double(A, 10, verbose = F), times = 10))
Rcpp::sourceCpp('src/RcppML.cpp')
Rcpp::sourceCpp('C:/Users/Owner/Desktop/test2.cpp')
str(ab)
knitr::opts_chunk$set(echo = TRUE)
random_system <- function(m, seed){
set.seed(seed)
X <- abs(matrix(rnorm(100*m),100, m))
btrue <- runif(m)
y <- X %*% btrue + rnorm(100)
return(list("a" = crossprod(X), "b" = crossprod(X, y), "X" = X, "y" = y))
}
ab <- random_system(50, 123)
a <- ab$a
b <- ab$b
plot(solve(a, b))
plot(solve(a, b), c_nnls(a, b))
plot(solve(a, b), c_solve(a, b))
microbenchmark(solve(a, b), c_solve(a, b), c_nnls(a, b))
Rcpp::sourceCpp('C:/Users/Owner/Desktop/test2.cpp')
plot(c_nnls(a, b), multiway::fnnls(a, b))
microbenchmark(solve(a, b), c_solve(a, b), c_nnls(a, b), c_solve2(a, b))
microbenchmark(solve(a, b), c_solve(a, b), c_nnls(a, b), c_solve2(a, b))
library(devtools)
document()
Rcpp::sourceCpp('src/RcppML.cpp')
Rcpp::sourceCpp('src/RcppML.cpp')
Rcpp::sourceCpp('src/RcppML.cpp')
